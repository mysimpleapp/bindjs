(function(){Bind=function(a,e){var c=a.length;if(void 0!==c)for(var d=0;d<c;++d)Bind(a[d],e);else c=a.innerHTML,d=c.replace(/\?{([^}]*)}/g,'<span ?txt="$1"></span>'),d!==c&&(a.innerHTML=d),v(a,[e])};var w=function(a){return void 0===a||null===a?"":String(a)},v=function(a,e){var c=0;if(a.hasAttribute("?for")){var d=a.getAttribute("?for");a.removeAttribute("?for");var c=C(d),b=y(e,c.arr)(),k=c.idx,g=a.parentNode,n=a.nextSibling,f=[];g.removeChild(a);for(var c=-1+b.length,h=0,l=b.length;h<l;++h)f.push({});
z(e,b,f,k,[],a,g,n);Array.observe(b,function(c){for(var d=[],h=0,m=c.length;h<m;++h){var l=c[h],p=l.type,r=l.index;if("splice"==p)var q=l.removed.length,t=l.addedCount;else"update"==p&&(t=q=1);0<q&&(d=d.concat(f.splice(r,q)));for(l=0;l<t;++l)f.splice(r,0,{})}z(e,b,f,k,d,a,g,n)})}else{for(var h=0,l=a.attributes,r=l.length;h<r;++h){var p=l[h],m=p.name,d=p.value;if("?"===m.charAt(0)){var p=A(e,d),t=y(e,d,p),q=d=null,u=null;"?if"==m?d=function(){a.style.display=t()?null:"none"}:"?txt"==m?(d=function(){a.textContent=
w(t())},a.getAttribute("contenteditable")&&(q=x(p,function(){return a.textContent})),u="input"):"?html"==m?(d=function(){a.innerHTML=w(t())},a.getAttribute("contenteditable")&&(q=x(p,function(){return a.innerHTML})),u="input"):"?val"==m||"?value"==m?(d=function(){val=w(t());a.value!==val&&(a.value=val)},q=x(p,function(){return a.value}),u="input"):"?on"===m.substring(0,3)?(q=t,u=m.substr(3)):d=function(b){return function(c){a.setAttribute(b,t())}}(m.substr(1));d&&D(p,d);q&&a.addEventListener(u,q);
m=1===p.length&&p[0].lst?p[0]:null;q&&m&&null===m.lst[m.att]?q():d&&d()}}h=0;r=a.children;for(l=r.length;h<l;++h)m=v(r[h],e),h+=m,l+=m}return c},x=function(a,e){var c=1===a.length&&a[0].lst?a[0]:null;return c?function(){c.lst[c.att]=e()}:null},A=function(a,e){for(var c=!1,d=[],b=null,k=[],g=0,n=e.length;g<n;++g){var f=e[g];c?f==c&&(c=!1):"'"==f||'"'==f?c=f:(null===b&&E.exec(f)&&(b={idxs:[g]},d.push(b)),null===b||F.exec(f)||(b.idxs.push(g),"["==f&&k.push(b),"."!=f&&(b=null)),"]"==f&&(b=k.pop(),b.idxs.push(g+
1)))}null!==b&&b.idxs.push(n);c=0;for(n=d.length;c<n;++c)b=d[c],k=b.idxs,g=k.length,b.idx=k[0],b.headS=e.substring(k[0],k[1]),f=e.substring(k[g-2],k[g-1]),2==g?f="'"+f+"'":"."==f[0]&&(f="'"+f.slice(1)+"'"),b.attS=f,2<g&&(b.lstS=e.substring(k[0],k[g-2]));n=0;for(c=d.length;n<c;++n){k=b=d[n];a:{var g=a,f=b.headS,h=void 0;for(h in g)if(f in g[h]){g=h;break a}g=null}k=k.scpN=g;null!==k&&(k=b.scp=a[k],b.lst=B(k,b.lstS),b.att=B(null,b.attS))}return d},y=function(scopes,e,c){c||(c=A(scopes,e));var d="",b=0;for(var a=
scopes.length;b<a;++b)d+="var scope"+b+"=scopes["+b+"]; ";var k=b=0;for(var a=c.length;k<a;++k){var g=c[k],n=g.scpN;null!==n&&(n="scope"+n+".",g=g.idx+b,e=e.slice(0,g)+n+e.slice(g),b+=n.length)}-1===e.indexOf(";")&&(e="return "+e);eval(d+"var fun=function(){"+e+"}");return fun},B=function(scope,e){scope&&(e="scope"+(e?"."+e:""));return eval(e)},D=function(a,e){for(var c=0,d=a.length;c<d;++c){var b=a[c];b.lst&&Object.observe(b.lst,function(a){return function(b){for(var c=0,d=b.length;c<d;++c)if(b[c].name===a){e();
break}}}(b.att))}},E=/[_a-zA-Z]/,F=/[_a-zA-Z0-9]/,C=function(a){var e;return(e=/(.*) in (.*)/.exec(a))?{idx:e[1].split(","),arr:e[2]}:{arr:a}},z=function(a,e,c,d,b,k,g,n){for(var f=0,h=b.length;f<h;++f){var l=b[f].dom;l&&g.removeChild(l)}h=c.length;for(f=h-1;0<=f;--f)if(b=c[f],!b.dom){l=f+1>=c.length?n:c[f+1].dom;h=g.insertBefore(k.cloneNode(!0),l);b.dom=h;var r=a;if(d){var p=d.length;if(0<p){var l=d[0],m={};m[l]=0;r=a.slice();r.push(m);b.keyObj=m;b.keyAtt=l}1<p&&(m[d[1]]=e[f])}v(h,r)}a=0;for(h=c.length;a<
h;++a)b=c[a],e=b.keyObj,l=b.keyAtt,e&&(e[l]=a)}})();