(function(){Bind=function(a,c){var d=a.length;if(void 0!==d)for(var b=0;b<d;++b)Bind(a[b],c);else d=a.innerHTML,b=d.replace(/\?{([^}]*)}/g,'<span ?txt="$1"></span>'),b!==d&&(a.innerHTML=b),t(a,[c])};var u=function(a){return void 0===a||null===a?"":String(a)},t=function(a,c){var d=0;if(a.hasAttribute("?for")){var b=a.getAttribute("?for");a.removeAttribute("?for");var d=z(b),f=v(c,d.arr)(),m=d.idx,n=a.parentNode,e=a.nextSibling,g=[];n.removeChild(a);for(var d=-1+f.length,h=0,k=f.length;h<k;++h)g.push({});
y(c,f,g,m,[],a,n,e);Array.observe(f,function(b){for(var d=[],h=0,l=b.length;h<l;++h){var k=b[h],p=k.type,q=k.index;if("splice"==p)var r=k.removed.length,t=k.addedCount;else"update"==p&&(t=r=1);0<r&&(d=d.concat(g.splice(q,r)));for(k=0;k<t;++k)g.splice(q,0,{})}y(c,f,g,m,d,a,n,e)})}else{for(var h=0,k=a.attributes,p=k.length;h<p;++h){var b=k[h],l=b.name,b=b.value;"?if"==l?q(c,b,a,function(a,b){b.style.display=a?null:"none"}):"?txt"==l?q(c,b,a,function(a,b){b.textContent=u(a)}):"?html"==l?q(c,b,a,function(a,
b){b.innerHTML=u(a)}):"?val"==l||"?value"==l?(q(c,b,a,function(a,b){a=u(a);b.value!==a&&(b.value=a)}),A(c,a,"input",b,function(a,b,c){b[c]=a.value})):"?on"===l.substring(0,3)?(l=l.substr(1),a[l]=v(c,b)):"?"===l.charAt(0)&&(l=l.substr(1),q(c,b,a,function(a){return function(b,c){c.setAttribute(a,b)}}(l)))}h=0;p=a.children;for(k=p.length;h<k;++h)b=t(p[h],c),h+=b,k+=b}return d},v=function(a,c){for(var d=w(c),b="",f=0,m=a.length;f<m;++f)b+="var scope"+f+"=a["+f+"]; ";for(var n=f=0,m=d.length;n<m;++n){var e=
d[n],g=x(a,e);null!==g&&(g="scope"+g+".",e=e.idx+f,c=c.slice(0,e)+g+c.slice(e),f+=g.length)}-1===c.indexOf(";")&&(c="return "+c);eval(b+"var fun=function(){"+c+"}");return fun},r=function(a,c){c&&(a="c"+(a?"."+a:""));return eval(a)},x=function(a,c){var d=c.head,b;for(b in a)if(d in a[b])return b;return null},q=function(a,c,d,b){var f=v(a,c);c=w(c);for(var m=0,n=c.length;m<n;++m){var e=c[m],g=x(a,e);null!==g&&(g=r(e.lst,a[g]),e=r(e.att),Object.observe(g,function(a){return function(c){for(var e=
0,g=c.length;e<g;++e)if(c[e].name===a){b(f(),d);break}}}(e)))}b(f(),d)},A=function(a,c,d,b,f){b=w(b);if(1===b.length){b=b[0];var m=x(a,b);if(null!==m){var n=r(b.lst,a[m]),e=r(b.att);c.addEventListener(d,function(){f(c,n,e)})}}},w=function(a){for(var c=/[a-zA-Z0-9][a-zA-Z0-9\.\[\]'"]*/g,d=/^([a-zA-Z0-9]+).*/,b=/^([a-zA-Z0-9]+)$/,f=/(.*)\.([a-zA-Z0-9]+)$/,m=/(.*)\[([a-zA-Z0-9'"]+)\]$/,n=[],e;e=c.exec(a);){var g=e.index,h=e[0],k=d.exec(h)[1],p,l=null;if(e=b.exec(h))l="'"+e[1]+"'";else if(e=f.exec(h))p=
e[1],l="'"+e[2]+"'";else if(e=m.exec(h))p=e[1],l=e[2];l&&n.push({idx:g,head:k,lst:p,att:l})}return n},z=function(a){var c;return(c=/(.*) in (.*)/.exec(a))?{idx:c[1].split(","),arr:c[2]}:{arr:a}},y=function(a,c,d,b,f,m,n,e){for(var g=0,h=f.length;g<h;++g){var k=f[g].dom;k&&n.removeChild(k)}h=d.length;for(g=h-1;0<=g;--g)if(f=d[g],!f.dom){k=g+1>=d.length?e:d[g+1].dom;h=n.insertBefore(m.cloneNode(!0),k);f.dom=h;var p=a;if(b){var l=b.length;if(0<l){var k=b[0],q={};q[k]=0;p=a.slice();p.push(q);f.keyObj=
q;f.keyAtt=k}1<l&&(q[b[1]]=c[g])}t(h,p)}a=0;for(h=d.length;a<h;++a)f=d[a],c=f.keyObj,k=f.keyAtt,c&&(c[k]=a)}})();