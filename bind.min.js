(function(){Bind=function(a,e){var c=a.length;if(void 0!==c)for(var d=0;d<c;++d)Bind(a[d],e);else c=a.innerHTML,d=c.replace(/\?{([^}]*)}/g,'<span ?txt="$1"></span>'),d!==c&&(a.innerHTML=d),v(a,[e])};var w=function(a){return void 0===a||null===a?"":String(a)},v=function(a,e){var c=0;if(a.hasAttribute&&a.hasAttribute("?for")){var d=a.getAttribute("?for");a.removeAttribute("?for");var c=C(d),b=y(e,c.arr)(),k=c.idx,h=a.parentNode,n=a.nextSibling,f=[];h.removeChild(a);for(var c=-1+b.length,g=0,l=b.length;g<
l;++g)f.push({});z(e,b,f,k,[],a,h,n);Array.observe(b,function(c){for(var d=[],g=0,m=c.length;g<m;++g){var l=c[g],p=l.type,q=l.index;if("splice"==p)var r=l.removed.length,t=l.addedCount;else"update"==p&&(t=r=1);0<r&&(d=d.concat(f.splice(q,r)));for(l=0;l<t;++l)f.splice(q,0,{})}z(e,b,f,k,d,a,h,n)})}else{var m=a.attributes;if(m){for(var q=[],g=0,l=m.length;g<l;++g)"?"==m[g].name.charAt(0)&&q.push(m[g]);g=0;for(l=q.length;g<l;++g){var p=q[g],m=p.name,d=p.value,p=A(e,d),t=y(e,d,p),r=d=null,u=null;"?if"==
m?d=function(b){return function(){a.style.display=b()?null:"none"}}(t):"?txt"==m?(d=function(b){return function(){var c=w(b());c!=a.textContent&&(a.textContent=c)}}(t),a.getAttribute("contenteditable")&&(r=x(p,function(){return a.textContent})),u="input"):"?html"==m?(d=function(b){return function(){var c=w(b());c!=a.innerHTML&&(a.innerHTML=c)}}(t),a.getAttribute("contenteditable")&&(r=x(p,function(){return a.innerHTML})),u="input"):"?val"==m||"?value"==m?(d=function(b){return function(){val=w(b());
a.value!==val&&(a.value=val)}}(t),r=x(p,function(){return a.value}),u="input"):"?on"===m.substring(0,3)?(r=t,u=m.substr(3)):d=function(b,c){return function(d){a.setAttribute(b,c())}}(m.substr(1),t);d&&D(p,d);r&&a.addEventListener(u,r);m=1===p.length&&p[0].lst?p[0]:null;r&&m&&null===m.lst[m.att]?r():d&&d()}}g=0;q=a.children;for(l=q.length;g<l;++g)m=v(q[g],e),g+=m,l+=m}return c},x=function(a,e){var c=1===a.length&&a[0].lst?a[0]:null;return c?function(){c.lst[c.att]=e()}:null},A=function(a,e){for(var c=
!1,d=[],b=null,k=[],h=0,n=e.length;h<n;++h){var f=e[h];c?f==c&&(c=!1):"'"==f||'"'==f?c=f:(null===b&&E.exec(f)&&(b={idxs:[h]},d.push(b)),null===b||F.exec(f)||(b.idxs.push(h),"["==f&&k.push(b),"."!=f&&(b=null)),"]"==f&&(b=k.pop(),b.idxs.push(h+1)))}null!==b&&b.idxs.push(n);c=0;for(n=d.length;c<n;++c)b=d[c],k=b.idxs,h=k.length,b.idx=k[0],b.headS=e.substring(k[0],k[1]),f=e.substring(k[h-2],k[h-1]),2==h?f="'"+f+"'":"."==f[0]&&(f="'"+f.slice(1)+"'"),b.attS=f,2<h&&(b.lstS=e.substring(k[0],k[h-2]));n=0;for(c=
d.length;n<c;++n){k=b=d[n];a:{var h=a,f=b.headS,g=void 0;for(g in h)if(f in h[g]){h=g;break a}h=null}k=k.scpN=h;null!==k&&(k=b.scp=a[k],b.lst=B(k,b.lstS),b.att=B(null,b.attS))}return d},y=function(scopes,e,c){c||(c=A(scopes,e));var d="",b=0;for(a=scopes.length;b<a;++b)d+="var scope"+b+"=scopes["+b+"]; ";var k=b=0;for(a=c.length;k<a;++k){var h=c[k],n=h.scpN;null!==n&&(n="scope"+n+".",h=h.idx+b,e=e.slice(0,h)+n+e.slice(h),b+=n.length)}-1===e.indexOf(";")&&(e="return "+e);eval(d+"var fun=function(){"+e+"}");return fun},
B=function(scope,e){scope&&(e="scope"+(e?"."+e:""));return eval(e)},D=function(a,e){for(var c=0,d=a.length;c<d;++c){var b=a[c];b.lst&&Object.observe(b.lst,function(a){return function(b){for(var c=0,d=b.length;c<d;++c)if(b[c].name===a){e();break}}}(b.att))}},E=/[_a-zA-Z]/,F=/[_a-zA-Z0-9]/,C=function(a){var e;return(e=/(.*) in (.*)/.exec(a))?{idx:e[1].split(","),arr:e[2]}:{arr:a}},z=function(a,e,c,d,b,k,h,n){for(var f=0,g=b.length;f<g;++f){var l=b[f].dom;l&&h.removeChild(l)}g=c.length;for(f=g-1;0<=f;--f)if(b=
c[f],!b.dom){l=f+1>=c.length?n:c[f+1].dom;g=h.insertBefore(k.cloneNode(!0),l);b.dom=g;var m=a;if(d){var q=d.length;if(0<q){var l=d[0],p={};p[l]=0;m=a.slice();m.push(p);b.keyObj=p;b.keyAtt=l}1<q&&(p[d[1]]=e[f])}v(g,m)}a=0;for(g=c.length;a<g;++a)b=c[a],e=b.keyObj,l=b.keyAtt,e&&(e[l]=a)}})();